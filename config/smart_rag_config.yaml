# Smart RAG Configuration
# ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿èª¿æ•´ç”¨è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«

# ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰æ¤œç´¢è¨­å®š
hybrid_search:
  # åŸºæœ¬çš„ãªé‡ã¿è¨­å®š
  semantic_weight: 0.7      # æ„å‘³æ¤œç´¢ã®é‡ã¿
  keyword_weight: 0.3       # ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰æ¤œç´¢ã®é‡ã¿
  
  # æ¤œç´¢çµæœæ•°
  default_top_k: 10         # ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®æ¤œç´¢çµæœæ•°
  candidate_multiplier: 2   # re-rankingç”¨ã®å€™è£œæ•°å€ç‡

# BM25ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰æ¤œç´¢è¨­å®š
bm25:
  k1: 1.2                   # èªå½™é »åº¦ã®é‡ã¿
  b: 0.75                   # æ–‡æ›¸é•·æ­£è¦åŒ–
  epsilon: 0.25             # ã‚¹ã‚³ã‚¢èª¿æ•´å€¤

# ãƒ†ã‚­ã‚¹ãƒˆãƒãƒ£ãƒ³ã‚¯è¨­å®š
chunking:
  chunk_size: 4000          # ãƒãƒ£ãƒ³ã‚¯ã‚µã‚¤ã‚ºï¼ˆæ–‡å­—æ•°ï¼‰
  overlap: 500              # ã‚ªãƒ¼ãƒãƒ¼ãƒ©ãƒƒãƒ—ã‚µã‚¤ã‚º
  sentence_boundary_search: 200  # æ–‡å¢ƒç•Œæ¢ç´¢ç¯„å›²

# Re-rankingè¨­å®š
reranking:
  diversity_weight: 0.2     # å¤šæ§˜æ€§ã®é‡ã¿
  quality_weight: 0.1       # ãƒ†ã‚­ã‚¹ãƒˆå“è³ªã®é‡ã¿
  overlap_weight: 0.3       # ã‚¯ã‚¨ãƒªé‡è¤‡åº¦ã®é‡ã¿
  similarity_threshold: 0.7 # é¡ä¼¼æ€§é–¾å€¤

# ã‚¯ã‚¨ãƒªæ‹¡å¼µè¨­å®š
query_expansion:
  max_synonym_queries: 3    # æœ€å¤§åŒç¾©èªã‚¯ã‚¨ãƒªæ•°
  max_search_queries: 5     # æœ€å¤§æ¤œç´¢ã‚¯ã‚¨ãƒªæ•°
  llm_expansion_max_length: 100  # LLMæ‹¡å¼µã®æœ€å¤§é•·

# ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆåœ§ç¸®è¨­å®š
context_compression:
  max_context_length: 8000  # æœ€å¤§ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆé•·
  max_sentences_per_result: 3  # çµæœã‚ãŸã‚Šã®æœ€å¤§æ–‡æ•°
  results_per_book: 3       # æ›¸ç±ã‚ãŸã‚Šã®æœ€å¤§çµæœæ•°

# æ›¸ç±é‡ã¿ä»˜ã‘è¨­å®š
book_weighting:
  title_match_bonus: 0.3    # ã‚¿ã‚¤ãƒˆãƒ«ä¸€è‡´ãƒœãƒ¼ãƒŠã‚¹
  author_match_bonus: 0.2   # è‘—è€…ä¸€è‡´ãƒœãƒ¼ãƒŠã‚¹
  recent_book_bonus: 0.1    # æ–°ã—ã„æ›¸ç±ãƒœãƒ¼ãƒŠã‚¹ï¼ˆ2010å¹´ä»¥é™ï¼‰
  historical_book_bonus: 0.05  # æ­´å²çš„æ›¸ç±ãƒœãƒ¼ãƒŠã‚¹ï¼ˆ1990å¹´ä»¥å‰ï¼‰
  max_weight: 2.0           # æœ€å¤§é‡ã¿ï¼ˆã‚­ãƒ£ãƒƒãƒ—ï¼‰

# é©å¿œçš„æˆ¦ç•¥è¨­å®š
adaptive_strategy:
  # ã‚¯ã‚¨ãƒªã‚¿ã‚¤ãƒ—åˆ¥è¨­å®š
  factual:
    semantic_weight: 0.5
    keyword_weight: 0.5
    top_k: 5
    diversity_weight: 0.1
  
  procedural:
    semantic_weight: 0.7
    keyword_weight: 0.3
    top_k: 15
    diversity_weight: 0.3
    max_context_length: 10000
  
  explanatory:
    semantic_weight: 0.8
    keyword_weight: 0.2
    top_k: 10
    diversity_weight: 0.2
  
  comparison:
    semantic_weight: 0.7
    keyword_weight: 0.3
    top_k: 15
    diversity_weight: 0.4

# ç‰¹ç•°æ€§åˆ¥èª¿æ•´
specificity_adjustments:
  high:
    top_k_reduction: 2        # çµæœæ•°å‰Šæ¸›
    keyword_weight_boost: 0.1 # ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰é‡ã¿å¢—åŠ 
  
  low:
    top_k_increase: 2         # çµæœæ•°å¢—åŠ 
    diversity_weight_boost: 0.1  # å¤šæ§˜æ€§é‡ã¿å¢—åŠ 

# ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è¨­å®š
performance:
  cache_embeddings: true     # åŸ‹ã‚è¾¼ã¿ã‚­ãƒ£ãƒƒã‚·ãƒ¥
  cache_bm25_index: true     # BM25ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚­ãƒ£ãƒƒã‚·ãƒ¥
  parallel_book_processing: true  # ä¸¦åˆ—æ›¸ç±å‡¦ç†

# ãƒ­ã‚°è¨­å®š
logging:
  level: "INFO"              # ãƒ­ã‚°ãƒ¬ãƒ™ãƒ«
  detailed_search_logs: true # è©³ç´°ãªæ¤œç´¢ãƒ­ã‚°
  performance_logs: true     # ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ­ã‚°

# UIè¨­å®š
ui:
  show_relevance_scores: true    # é–¢é€£åº¦ã‚¹ã‚³ã‚¢è¡¨ç¤º
  show_book_weights: true        # æ›¸ç±é‡ã¿è¡¨ç¤º
  use_fire_emoji: true           # ğŸ”¥çµµæ–‡å­—ä½¿ç”¨
  max_title_display_length: 50  # ã‚¿ã‚¤ãƒˆãƒ«è¡¨ç¤ºæœ€å¤§é•·